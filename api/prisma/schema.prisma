datasource DS {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator photonjs {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "rhel-openssl-1.0.x"]
}

// Define your own datamodels here and run `yarn redwood db save` to create
// migrations for them.

model User {
  id                          Int            @id @default(autoincrement())
  createdAt                   DateTime       @default(now())
  updatedAt                   DateTime       @updatedAt
  firstName                   String
  lastName                    String
  dateOfBirth                 DateTime
  gender                      Gender
  lang                        Language       @relation(fields: [langId], references: [id])
  langId                      Int            @map("lang")
  location                    String
  phone                       String?
  email                       String         @unique
  contactPreference           ContactBy
  skillDomains                SkillDomain[]  @relation(references: [id])
  skills                      Skill[]        @relation(references: [id])
  otherSkills                 String?
  availabilities              Availability[] @relation(references: [id])
  committeeRecruitmentConsent Boolean        @default(false)
}

model SkillDomain {
  id     Int     @id @default(autoincrement())
  name   String  @unique
  skills Skill[]
  users  User[]  @relation(references: [id])
}

model Skill {
  id       Int         @id @default(autoincrement())
  name     String      @unique
  domain   SkillDomain @relation(fields: [domainId], references: [id])
  domainId Int         @map("domain")
  users    User[]      @relation(references: [id])
}

model Availability {
  id    Int    @id @default(autoincrement())
  name  String @unique
  users User[] @relation(references: [id])
}

model Language {
  id    Int    @id @default(autoincrement())
  name  String @unique
  users User[] @relation(references: [id])
}

enum Gender {
  male female
}

enum ContactBy {
  email phone text
}